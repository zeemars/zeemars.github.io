<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
        <head>
            <title>
                潍坊市人民医院住培管理平台
            </title>
        </head>
	<script src="./base64.js"></script>
        <body id="body">
            <style>
                body{margin:0; padding:0;}
            </style>
            <script type="text/javascript">
		var mainUrl = "http://wfphcn.iask.in:801/rs/";
                function changeFrameHeight(){
			var ifm = document.getElementById("Info1");
			ifm.height=window.innerHeight-getScrollbarWidth();
			ifm.width=window.innerWidth-getScrollbarWidth();
                }
                function getScrollbarWidth() {
                    var oP = document.createElement('p'),
                        styles = {
                            width: '100px',
                            height: '100px',
                            overflowY: 'scroll'
                        }, i, scrollbarWidth;
                    for (i in styles) oP.style[i] = styles[i];
                    document.body.appendChild(oP);
                    scrollbarWidth = oP.offsetWidth - oP.clientWidth;
                    oP.remove();
                    return scrollbarWidth;
                }
                window.onresize=function(){
			changeFrameHeight();  
                }

                window.onload = function()
		{	
			var url = getCookie('pre_url');
			var ifm= document.getElementById("Info1");
			//判断是否ios
			var u = navigator.userAgent;
			var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);
			if(isiOS){
				var body=document.getElementById("body");//删去iframe			
				body.removeChild(ifm);
				var xmlhttp = new ActiveXObject("MSXML2.XMLHTTP.3.0");
			 xmlhttp.open("post",mainUrl,false);
			    xmlhttp.onreadystatechange= HandleStateChange;
			    xmlhttp.send();
			    function HandleStateChange()
			    {
			      if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
			      {
				  document.write(xmlhttp.responseText);
			      }
			    }
			}else{			
				 
				if (url)
				{				 	
					ifm.setAttribute('src', './jumper.html?url='+Base64.encode(url));
				}else{
					ifm.setAttribute('src', './jumper.html?url='+Base64.encode(mainUrl));
				}
			}
		}

		function check(pre_url)
		{
			setCookie('pre_url', pre_url, 1);
		}

		function getCookie(c_name)
		{
			if (document.cookie.length>0)
		   	{
		   		c_start=document.cookie.indexOf(c_name + "=")
				if (c_start!=-1)
				{ 
					c_start=c_start + c_name.length+1 
					c_end=document.cookie.indexOf(";",c_start)
					if (c_end==-1) c_end=document.cookie.length
					return unescape(document.cookie.substring(c_start,c_end))
				} 
	   		}
			return ""
		}

		function setCookie(c_name,value,expiredays)
		{
			 var exdate=new Date()
			 exdate.setDate(exdate.getDate()+expiredays)
			 document.cookie=c_name+ "=" +escape(value)+
			 ((expiredays==null) ? "" : ";expires="+exdate.toGMTString())
		}
            </script>
            <!--iframe的高度设置为父元素的高度即可实现高度自适应-->
            <!--这边以body为父元素，当然也可以以div之类的元素为父元素-->
            <iframe frameborder="0" id="Info1" name="Info1" onload="changeFrameHeight()" scrolling="true" src="##">
            </iframe>
        </body>
    </meta>
</html>
